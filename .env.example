# ============================================
# 应用基础配置 (Application Configuration)
# ============================================
NODE_ENV=development
APP_NAME=diy-nav-web
APP_PORT=8787

# ============================================
# Cloudflare 配置 (Cloudflare Configuration)
# ============================================
# Cloudflare Account ID (R2 和 D1 共用)
# 可从 R2 Endpoint 中提取，格式: https://{accountId}.r2.cloudflarestorage.com
STORAGE_R2_ACCOUNT_ID=必填

# --- Cloudflare R2 对象存储 ---
STORAGE_R2_ENDPOINT=必填
STORAGE_R2_ACCESS_KEY_ID=必填
STORAGE_R2_SECRET_ACCESS_KEY=必填

# --- Cloudflare D1 数据库 ---
DB_D1_API_TOKEN=必填
DB_D1_DATABASE_ID=必填

# ============================================
# 存储配置 (Storage Configuration)
# ============================================
# 公开资源存储提供商 (头像/图标，需支持公开 URL): r2 | s3 | local
PUBLIC_STORAGE_PROVIDER=r2

# 备份存储提供商: r2 (默认) | webdav
BACKUP_STORAGE_PROVIDER=r2

# 存储桶配置 (R2/S3 通用)
STORAGE_BUCKET=必填
STORAGE_PUBLIC_BASE_URL=必填

# 存储路径配置 (按资源类型)
STORAGE_ICONS_PATH=icons
STORAGE_AVATARS_PATH=avatars
STORAGE_BACKUPS_PATH=data-backups

# ============================================
# AWS S3 配置 (可选，当 PUBLIC_STORAGE_PROVIDER=s3 时使用)
# ============================================
STORAGE_S3_REGION=
STORAGE_S3_ACCESS_KEY_ID=
STORAGE_S3_SECRET_ACCESS_KEY=
STORAGE_S3_ENDPOINT=

# ============================================
# WebDAV 配置 (可选，当 BACKUP_STORAGE_PROVIDER=webdav 时使用)
# ============================================
# 支持坚果云、Nextcloud 等 WebDAV 服务
WEBDAV_URL=
WEBDAV_USERNAME=
WEBDAV_PASSWORD=
WEBDAV_BASE_PATH=/nav-backup/

# ============================================
# 认证配置 (Authentication Configuration)
# ============================================
# JWT 密钥 (用于签发和验证 Token)
# ⚠️ 生产环境必填(下方密钥需修改)
# 建议使用: openssl rand -base64 32 生成
JWT_SECRET=dev-secret-do-not-use-in-prod

# ============================================
# 图标服务配置 (Icon Service Configuration)
# ============================================
# 图标尺寸 (像素)
ICON_SIZE=64
# 默认图标 URL
ICON_DEFAULT_URL=/icons/default.svg
# Google Favicon 代理地址
ICON_GOOGLE_PROXY_URL=https://www.google.com/s2/favicons
# 图标 API 端口
ICON_API_PORT=8787

# ============================================
# 备份配置 (Backup Configuration)
# ============================================
# 自动备份保留的最大数量 (默认: 5)
BACKUP_MAX_RETAINED=5

# ============================================
# 日志配置 (Logging Configuration)
# ============================================
# 日志详细度控制
# true: 打印完整 Header（Token等敏感信息会自动屏蔽为 ***）
# false: 隐藏 Header 以保持日志整洁（默认）
LOG_HEADERS=false

# ============================================
# 前端配置 (Frontend Configuration)
# ============================================
# API 服务地址 (推荐: /api，保持开发/生产一致性。开发环境将通过 Vite 代理转发到真实地址)
VITE_API_BASE_URL=/api
# 应用基础路径
VITE_BASE=/
# 是否使用 Hash 路由模式
VITE_USE_HASH_ROUTER=false
# 自动备份间隔时间,单位毫秒 (默认: 3600000 = 1小时)
VITE_AUTO_BACKUP_INTERVAL=3600000

# ============================================
# 第三方登录 (OAuth Configuration)
# ============================================
# [Frontend] 构建时注入，公开可见 (Build-time, Public)
# --------------------------------------------
# 必须以 VITE_ 开头，用于前端跳转授权页
# Redirect URI 需在 OAuth 提供商后台配置一致
VITE_LINUX_DO_CLIENT_ID=
VITE_LINUX_DO_REDIRECT_URI=http://127.0.0.1:3000/oauth2/callback

# [Backend] 运行时注入，私密 (Runtime, Private)
# --------------------------------------------
# 用于服务器端换取 Token，绝对不可暴露给前端
# CLIENT_SECRET 必须严格保密
LINUX_DO_CLIENT_ID=
LINUX_DO_CLIENT_SECRET=
# 这里的 Redirect URI 用于后端校验，必须与前端发起的地址完全一致
LINUX_DO_REDIRECT_URI=http://127.0.0.1:3000/oauth2/callback

# ============================================
# AI 配置 (AI Configuration)
# ============================================
# 支持 OpenAI 及兼容 API（如第三方中转服务）
AI_OPENAI_API_KEY=
AI_OPENAI_BASE_URL=https://api.openai.com/v1
AI_OPENAI_MODEL=gpt-4o-mini