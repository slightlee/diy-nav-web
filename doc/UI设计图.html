<html lang="zh-CN">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <title>
   DIY导航
  </title>
  <script src="https://res.gemcoder.com/js/reload.js">
  </script>
  <script src="https://cdn.tailwindcss.com">
  </script>
  <link href="https://cdn.bootcdn.net/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet"/>
  <script>
   tailwind.config = {
  theme: {
    extend: {
      colors: {
        primary: '#3B82F6',
        secondary: '#10B981',
        accent: '#EF4444',
        neutral: '#F3F4F6',
        'neutral-dark': '#9CA3AF',
        'category-active': '#FBBF24'
      },
      fontFamily: {
        inter: ['Inter', 'system-ui', 'sans-serif']
      }
    }
  }
};
  </script>
  <style type="text/tailwindcss">
   @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .card-shadow {
                box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            }
            .hover-scale {
                transition: transform 0.2s ease-in-out;
            }
            .hover-scale:hover {
                transform: scale(1.03);
            }
        }
  </style>
 </head>
 <body class="bg-gray-50 font-inter min-h-screen flex flex-col">
  <!-- [MODULE] abc_主内容区域 -->
  <div class="container mx-auto px-4 py-8 max-w-6xl flex-grow">
   <!-- [MODULE] d23_顶部区域 -->
   <header class="flex justify-between items-center mb-8">
    <!-- [MODULE] 33f_顶部区域:标题 -->
    <div class="flex items-center space-x-2">
     <div class="w-10 h-10 rounded-lg bg-primary flex items-center justify-center text-white">
      <i class="fas fa-compass text-xl">
      </i>
     </div>
     <h1 class="text-[clamp(1.5rem,3vw,2rem)] font-bold text-gray-800">
      DIY导航
     </h1>
    </div>
    <!-- [/MODULE] 33f_顶部区域:标题 -- 包含应用图标和标题文字 -->
    <!-- [MODULE] 45d_顶部区域:操作按钮 -->
    <div class="flex items-center space-x-4">
     <button class="bg-primary hover:bg-primary/90 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-all duration-200 shadow-md hover:shadow-lg" id="add-site-btn">
      <i class="fas fa-plus">
      </i>
      <span>
       添加网站
      </span>
     </button>
     <div class="relative" id="settings-menu-container">
      <button class="w-10 h-10 rounded-lg bg-gray-100 hover:bg-gray-200 flex items-center justify-center text-gray-700 transition-all duration-200" id="settings-btn">
       <i class="fas fa-cog">
       </i>
      </button>
      <div class="absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg py-2 z-50 hidden" id="settings-dropdown">
       <a class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" href="javascript:void(0);" id="edit-categories-settings">
        <i class="fas fa-folder-plus mr-2 text-gray-500">
        </i>
        管理分类
       </a>
       <a class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" href="javascript:void(0);" id="edit-tags-settings">
        <i class="fas fa-tags mr-2 text-gray-500">
        </i>
        管理标签
       </a>
       <div class="border-t border-gray-100 my-1">
       </div>
       <a class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" href="javascript:void(0);" id="import-export-settings">
        <i class="fas fa-exchange-alt mr-2 text-gray-500">
        </i>
        导入/导出数据
       </a>
       <a class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" href="javascript:void(0);" id="theme-settings">
        <i class="fas fa-moon mr-2 text-gray-500">
        </i>
        主题设置
       </a>
      </div>
     </div>
    </div>
    <!-- [/MODULE] 45d_顶部区域:操作按钮 -- 包含添加网站按钮和设置按钮 -->
   </header>
   <!-- [/MODULE] d23_顶部区域 -- 包含标题和操作按钮 -->
   <!-- [MODULE] e7f_搜索区域 -->
   <div class="mb-8">
    <!-- [MODULE] 89g_搜索区域:搜索框 -->
    <div class="relative">
     <input class="w-full py-4 px-5 pr-12 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all duration-200 shadow-sm" id="search-input" placeholder="搜索标签..." type="text"/>
     <button class="absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-primary transition-colors duration-200">
      <i class="fas fa-search text-xl">
      </i>
     </button>
    </div>
    <!-- [/MODULE] 89g_搜索区域:搜索框 -- 包含搜索输入框和搜索图标 -->
    <!-- [MODULE] a2b_搜索区域:标签筛选 -->
    <div class="mt-8">
     <div class="flex justify-between items-center mb-3">
      <label class="block text-sm font-medium text-gray-700">
       标签
      </label>
      <div class="flex space-x-2">
       <button class="text-xs text-gray-600 hover:text-primary flex items-center" id="manage-tags-btn">
        <i class="fas fa-edit mr-1 text-xs">
        </i>
        管理标签
       </button>
      </div>
     </div>
     <div class="flex flex-wrap gap-2" id="tag-list">
      <div class="inline-block">
       <button class="px-3 py-1.5 bg-secondary/10 text-secondary text-sm rounded-full flex items-center tag-item hover:bg-secondary/20 transition-colors duration-200" data-tag="Git">
        Git
        <i class="fas fa-times-circle ml-1 opacity-0 tag-remove-icon transition-opacity">
        </i>
       </button>
      </div>
      <div class="inline-block">
       <button class="px-3 py-1.5 bg-accent/10 text-accent text-sm rounded-full flex items-center tag-item hover:bg-accent/20 transition-colors duration-200" data-tag="搜索引擎">
        搜索引擎
        <i class="fas fa-times-circle ml-1 opacity-0 tag-remove-icon transition-opacity">
        </i>
       </button>
      </div>
     </div>
    </div>
    <!-- [/MODULE] a2b_搜索区域:标签筛选 -- 包含标签选项和管理标签按钮 -->
   </div>
   <!-- [/MODULE] e7f_搜索区域 -- 包含搜索框和标签筛选功能 -->
   <!-- [MODULE] s8d_搜索结果区域 -->
   <div class="mb-8 hidden" id="search-results">
    <div class="flex justify-between items-center mb-4">
     <h3 class="text-lg font-semibold text-gray-800">
      搜索结果
     </h3>
     <button class="text-sm text-gray-500 hover:text-gray-700" id="clear-search">
      <i class="fas fa-times mr-1">
      </i>
      清除搜索
     </button>
    </div>
    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
     <!-- 搜索结果会通过JS动态生成 -->
     <div class="bg-white rounded-xl p-4 card-shadow hover-scale">
      <div class="flex items-center mb-3">
       <img alt="GitHub" class="w-8 h-8 rounded mr-3" src="./api/searchImage?query=GitHub logo, blue background, simple icon&amp;width=32&amp;height=32"/>
       <h4 class="font-medium">
        GitHub
       </h4>
      </div>
      <p class="text-sm text-gray-500 mb-3">
       代码托管平台
      </p>
      <div class="flex flex-wrap gap-2">
       <span class="px-2 py-0.5 bg-gray-100 text-gray-600 text-xs rounded-full">
        Git
       </span>
       <span class="px-2 py-0.5 bg-gray-100 text-gray-600 text-xs rounded-full">
        开发
       </span>
      </div>
     </div>
    </div>
   </div>
   <!-- [/MODULE] s8d_搜索结果区域 -- 显示搜索结果的网格卡片，包含网站图标、名称、描述和标签 -->
   <!-- [MODULE] c3d_分类区域 -->
   <div class="mb-6">
    <div class="flex justify-between items-center mb-3">
     <label class="block text-sm font-medium text-gray-700">
      分类
     </label>
     <div class="flex space-x-2">
      <button class="text-xs text-gray-600 hover:text-primary flex items-center" id="edit-categories-btn">
       <i class="fas fa-edit mr-1 text-xs">
       </i>
       管理分类
      </button>
     </div>
    </div>
    <div class="flex flex-wrap gap-2" id="category-tags">
     <button class="px-3 py-1.5 bg-primary text-white text-sm rounded-full flex items-center category-tag active" data-category="all">
      所有分类
      <span class="ml-1 w-1.5 h-1.5 bg-white rounded-full">
      </span>
     </button>
     <button class="px-3 py-1.5 bg-gray-100 hover:bg-gray-200 text-gray-700 text-sm rounded-full flex items-center category-tag" data-category="常用工具">
      常用工具
      <span class="ml-1 w-1.5 h-1.5 bg-gray-300 rounded-full">
      </span>
     </button>
     <button class="px-3 py-1.5 bg-gray-100 hover:bg-gray-200 text-gray-700 text-sm rounded-full flex items-center category-tag" data-category="开发">
      开发
      <span class="ml-1 w-1.5 h-1.5 bg-gray-300 rounded-full">
      </span>
     </button>
     <button class="px-3 py-1.5 bg-gray-100 hover:bg-gray-200 text-gray-700 text-sm rounded-full flex items-center category-tag" data-category="AI学习">
      AI学习
      <span class="ml-1 w-1.5 h-1.5 bg-gray-300 rounded-full">
      </span>
     </button>
     <button class="px-3 py-1.5 bg-gray-100 hover:bg-gray-200 text-gray-700 text-sm rounded-full flex items-center category-tag" data-category="设计">
      设计
      <span class="ml-1 w-1.5 h-1.5 bg-gray-300 rounded-full">
      </span>
     </button>
     <button class="px-3 py-1.5 bg-gray-100 hover:bg-gray-200 text-gray-700 text-sm rounded-full flex items-center category-tag" data-category="文档">
      文档
      <span class="ml-1 w-1.5 h-1.5 bg-gray-300 rounded-full">
      </span>
     </button>
    </div>
   </div>
   <!-- [/MODULE] c3d_分类区域 -- 包含分类标签选择、管理分类和添加分类按钮 -->
   <!-- [MODULE] f4g_网站列表区域 -->
   <div>
    <!-- [MODULE] 56h_网站列表区域:网站卡片 -->
    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
     <!-- [MODULE] 72j_网站列表区域:网站卡片-百度 -->
     <div class="bg-white rounded-lg p-4 card-shadow hover-scale border border-gray-100 group">
      <div class="flex justify-between items-start mb-3">
       <div class="flex items-center space-x-2">
        <div class="w-10 h-10 rounded-lg bg-blue-50 flex items-center justify-center text-blue-500">
         <i class="fas fa-globe">
         </i>
        </div>
        <div>
         <h3 class="font-semibold text-gray-800 text-sm">
          百度
         </h3>
         <p class="text-xs text-gray-500 truncate max-w-[120px]" contenteditable="false" style="outline: none;">
          baidu.com
         </p>
        </div>
       </div>
       <div class="opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex space-x-1">
        <button class="edit-site-btn w-7 h-7 rounded-full bg-gray-100 hover:bg-gray-200 flex items-center justify-center text-gray-600 transition-colors duration-200">
         <i class="fas fa-edit text-xs">
         </i>
        </button>
        <button class="delete-site-btn w-7 h-7 rounded-full bg-gray-100 hover:bg-red-100 flex items-center justify-center text-gray-600 hover:text-red-500 transition-colors duration-200">
         <i class="fas fa-trash-alt text-xs">
         </i>
        </button>
       </div>
      </div>
      <p class="text-xs text-gray-600 line-clamp-2 mb-3">
       搜索你想要的搜索你想要的搜索你想要的
      </p>
      <div class="flex flex-wrap gap-1.5">
       <span class="px-2 py-0.5 rounded-full bg-blue-100 text-blue-600 text-xs">
        搜索引擎
       </span>
       <span class="px-2 py-0.5 rounded-full bg-gray-100 text-gray-600 text-xs">
        常用
       </span>
      </div>
     </div>
     <!-- [/MODULE] 72j_网站列表区域:网站卡片-百度 -- 包含网站图标、名称、URL、描述、标签以及编辑和删除按钮 -->
     <!-- [MODULE] 93k_网站列表区域:网站卡片-github -->
     <div class="bg-white rounded-lg p-4 card-shadow hover-scale border border-gray-100 group">
      <div class="flex justify-between items-start mb-3">
       <div class="flex items-center space-x-2">
        <div class="w-10 h-10 rounded-lg bg-gray-900 flex items-center justify-center text-white">
         <i class="fab fa-github">
         </i>
        </div>
        <div>
         <h3 class="font-semibold text-gray-800 text-sm">
          GitHub
         </h3>
         <p class="text-xs text-gray-500 truncate max-w-[120px]">
          github.com
         </p>
        </div>
       </div>
       <div class="opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex space-x-1">
        <button class="edit-site-btn w-7 h-7 rounded-full bg-gray-100 hover:bg-gray-200 flex items-center justify-center text-gray-600 transition-colors duration-200">
         <i class="fas fa-edit text-xs">
         </i>
        </button>
        <button class="delete-site-btn w-7 h-7 rounded-full bg-gray-100 hover:bg-red-100 flex items-center justify-center text-gray-600 hover:text-red-500 transition-colors duration-200">
         <i class="fas fa-trash-alt text-xs">
         </i>
        </button>
       </div>
      </div>
      <div class="flex flex-wrap gap-1.5">
       <span class="px-2 py-0.5 rounded-full bg-gray-100 text-gray-600 text-xs">
        Git
       </span>
       <span class="px-2 py-0.5 rounded-full bg-gray-100 text-gray-600 text-xs">
        代码托管
       </span>
       <span class="px-2 py-0.5 rounded-full bg-gray-100 text-gray-600 text-xs">
        开发
       </span>
      </div>
     </div>
     <!-- [/MODULE] 93k_网站列表区域:网站卡片-github -- 包含网站图标、名称、URL、标签以及编辑和删除按钮 -->
    </div>
    <!-- [/MODULE] 56h_网站列表区域:网站卡片 -- 包含多个网站卡片和添加新网站卡片 -->
   </div>
   <!-- [/MODULE] f4g_网站列表区域 -- 展示网站卡片列表 -->
<!-- [MODULE] a7d_网站列表区域 -->
   <div class="mt-8">
    <!-- 网站列表区域内容 -->
   </div>
   <!-- [/MODULE] a7d_网站列表区域 -- 包含网站卡片网格，每个卡片保持统一高度和占位空间 -->
   <!-- [MODULE] 25n_空状态区域 -->
   <div class="hidden py-20 flex flex-col items-center justify-center text-center" id="empty-state">
    <div class="w-24 h-24 rounded-full bg-gray-100 flex items-center justify-center text-gray-400 mb-6">
     <i class="fas fa-folder-open text-3xl">
     </i>
    </div>
    <h3 class="text-xl font-semibold text-gray-700 mb-2">
     暂无网站
    </h3>
    <p class="text-gray-500 mb-8 max-w-md">
     添加你的第一个网站到收藏夹，开始个性化你的导航页面
    </p>
    <button class="bg-primary hover:bg-primary/90 text-white px-6 py-3 rounded-lg flex items-center space-x-2 transition-all duration-200 shadow-md hover:shadow-lg" id="empty-add-btn">
     <i class="fas fa-plus">
     </i>
     <span>
      添加网站
     </span>
    </button>
   </div>
   <!-- [/MODULE] 25n_空状态区域 -- 当没有网站数据时显示的空状态提示 -->
  </div>
  <!-- [/MODULE] abc_主内容区域 -- 包含顶部区域、搜索区域、分类区域、网站列表区域和空状态区域 -->
  <!-- [MODULE] 36p_模态框区域 -->
  <div class="fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 hidden opacity-0 transition-opacity duration-200" id="modal-overlay">
   <!-- [MODULE] 47q_模态框区域:添加网站模态框 -->
   <div class="bg-white rounded-2xl w-full max-w-md mx-4 transform scale-95 transition-transform duration-200" id="add-site-modal">
    <div class="p-6 border-b border-gray-100">
     <h2 class="text-xl font-bold text-gray-800">
      添加新网站
     </h2>
     <button class="absolute top-6 right-6 text-gray-400 hover:text-gray-600 transition-colors duration-200" id="close-modal-btn">
      <i class="fas fa-times">
      </i>
     </button>
    </div>
    <div class="p-6">
     <div class="flex items-center justify-center mb-6">
      <div class="w-20 h-20 rounded-lg bg-gray-100 flex items-center justify-center relative overflow-hidden">
       <img alt="网站图标" class="w-10 h-10 object-contain" id="site-favicon" src=""/>
       <div class="text-gray-400" id="favicon-placeholder">
        <i class="fas fa-globe text-3xl">
        </i>
       </div>
      </div>
      <p class="text-sm text-gray-500 mt-2">
       网站图标将自动获取
      </p>
     </div>
    </div>
    <div class="p-6" style="width:;height:">
     <form id="add-site-form">
      <div class="mb-4">
       <label class="block text-sm font-medium text-gray-700 mb-1" for="site-name">
        网站名称
        <span class="text-accent">
         *
        </span>
       </label>
       <input class="w-full px-4 py-2 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all duration-200" id="site-name" required="" type="text"/>
      </div>
      <div class="mb-4">
       <label class="block text-sm font-medium text-gray-700 mb-1" for="site-url">
        网站URL
        <span class="text-accent">
         *
        </span>
       </label>
       <input class="w-full px-4 py-2 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all duration-200" id="site-url" required="" type="url"/>
      </div>
      <div class="mb-4">
       <label class="block text-sm font-medium text-gray-700 mb-1" for="site-desc">
        网站描述 (可选)
       </label>
       <textarea class="w-full px-4 py-2 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all duration-200" id="site-desc" rows="2">
        </textarea>
      </div>
      <div class="mb-4">
       <label class="block text-sm font-medium text-gray-700 mb-1" for="site-category">
        分类
       </label>
       <select class="w-full px-4 py-2 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all duration-200 appearance-none bg-white" id="site-category">
        <option value="常用工具">
         常用工具
        </option>
        <option value="开发">
         开发
        </option>
        <option value="AI学习">
         AI学习
        </option>
        <option value="设计">
         设计
        </option>
        <option value="文档">
         文档
        </option>
        <option value="add-new">
         + 添加新分类
        </option>
       </select>
      </div>
      <div class="mb-6">
       <label class="block text-sm font-medium text-gray-700 mb-1">
        标签
       </label>
       <div class="flex flex-wrap gap-2 mb-2" id="tags-container">
        <span class="px-3 py-1 rounded-full bg-blue-100 text-blue-600 text-sm flex items-center">
         搜索引擎
         <button class="ml-1 text-blue-400 hover:text-blue-500">
          <i class="fas fa-times-circle">
          </i>
         </button>
        </span>
        <span class="px-3 py-1 rounded-full bg-gray-100 text-gray-600 text-sm flex items-center">
         常用
         <button class="ml-1 text-gray-400 hover:text-gray-500">
          <i class="fas fa-times-circle">
          </i>
         </button>
        </span>
       </div>
       <div class="flex">
        <input class="flex-grow px-4 py-2 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all duration-200" id="tag-input" placeholder="添加标签..." type="text"/>
        <button class="ml-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors duration-200" id="add-tag-btn" type="button">
         添加
        </button>
       </div>
      </div>
      <div class="flex space-x-3">
       <button class="flex-1 px-4 py-3 border border-gray-200 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors duration-200" id="cancel-btn" type="button">
        取消
       </button>
       <button class="flex-1 px-4 py-3 bg-primary hover:bg-primary/90 text-white rounded-lg transition-colors duration-200 font-medium" type="submit">
        保存
       </button>
      </div>
     </form>
    </div>
   </div>
   <!-- [/MODULE] 47q_模态框区域:添加网站模态框 -- 包含网站名称、URL、描述、分类、标签等表单字段以及取消和保存按钮 -->
   <!-- [MODULE] 58r_模态框区域:管理分类模态框 -->
   <div class="bg-white rounded-2xl w-full max-w-md mx-4 transform scale-95 transition-transform duration-200 hidden" id="manage-categories-modal">
    <div class="p-6 border-b border-gray-100">
     <h2 class="text-xl font-bold text-gray-800">
      管理分类
     </h2>
     <button class="absolute top-6 right-6 text-gray-400 hover:text-gray-600 transition-colors duration-200 close-modal-btn">
      <i class="fas fa-times">
      </i>
     </button>
    </div>
    <div class="p-6">
     <div class="bg-gray-50 rounded-xl p-5 mb-6">
      <h3 class="text-sm font-medium text-gray-700 mb-3">
       添加新分类
      </h3>
      <div class="space-y-4">
       <div>
        <label class="block text-sm font-medium text-gray-700 mb-1" for="new-category-name">
         分类名称
         <span class="text-accent">
          *
         </span>
        </label>
        <input class="w-full px-4 py-2 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all duration-200" id="new-category-name" placeholder="输入分类名称" required="" type="text"/>
       </div>
       <div>
        <label class="block text-sm font-medium text-gray-700 mb-1" for="new-category-desc">
         分类描述 (可选)
        </label>
        <textarea class="w-full px-4 py-2 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all duration-200" id="new-category-desc" placeholder="输入分类描述" rows="2">
        </textarea>
       </div>
       <button class="w-full py-2 bg-primary hover:bg-primary/90 text-white rounded-lg transition-colors duration-200 font-medium" id="save-category-btn">
        添加分类
       </button>
      </div>
     </div>
     <div>
      <h3 class="text-sm font-medium text-gray-700 mb-3 flex items-center">
       分类排序
       <span class="ml-2 text-xs text-gray-500 font-normal">
        拖拽调整顺序
       </span>
      </h3>
      <div class="space-y-2 max-h-60 overflow-y-auto pr-2" id="categories-sortable">
       <div class="p-3 bg-gray-50 rounded-lg flex items-center justify-between cursor-move category-item" data-id="1">
        <div class="flex items-center">
         <i class="fas fa-grip-vertical text-gray-400 mr-3">
         </i>
         <span>
          常用工具
         </span>
        </div>
        <div class="flex space-x-2">
         <button class="text-gray-400 hover:text-primary edit-category-btn">
          <i class="fas fa-edit">
          </i>
         </button>
         <button class="text-gray-400 hover:text-accent delete-category-btn">
          <i class="fas fa-trash">
          </i>
         </button>
        </div>
       </div>
       <div class="p-3 bg-gray-50 rounded-lg flex items-center justify-between cursor-move category-item" data-id="2">
        <div class="flex items-center">
         <i class="fas fa-grip-vertical text-gray-400 mr-3">
         </i>
         <span>
          开发
         </span>
        </div>
        <div class="flex space-x-2">
         <button class="text-gray-400 hover:text-primary edit-category-btn">
          <i class="fas fa-edit">
          </i>
         </button>
         <button class="text-gray-400 hover:text-accent delete-category-btn">
          <i class="fas fa-trash">
          </i>
         </button>
        </div>
       </div>
       <div class="p-3 bg-gray-50 rounded-lg flex items-center justify-between cursor-move category-item" data-id="3">
        <div class="flex items-center">
         <i class="fas fa-grip-vertical text-gray-400 mr-3">
         </i>
         <span>
          AI学习
         </span>
        </div>
        <div class="flex space-x-2">
         <button class="text-gray-400 hover:text-primary edit-category-btn">
          <i class="fas fa-edit">
          </i>
         </button>
         <button class="text-gray-400 hover:text-accent delete-category-btn">
          <i class="fas fa-trash">
          </i>
         </button>
        </div>
       </div>
      </div>
     </div>
    </div>
    <div class="p-4 border-t border-gray-100 flex justify-end">
     <button class="px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors duration-200 close-modal-btn">
      关闭
     </button>
    </div>
   </div>
   <!-- [/MODULE] 58r_模态框区域:管理分类模态框 -- 包含添加分类表单和分类拖拽排序功能 -->
   <!-- [MODULE] 69s_模态框区域:管理标签模态框 -->
   <div class="bg-white rounded-2xl w-full max-w-md mx-4 transform scale-95 transition-transform duration-200 hidden" id="manage-tags-modal">
    <div class="p-6 border-b border-gray-100">
     <h2 class="text-xl font-bold text-gray-800">
      管理标签
     </h2>
     <button class="absolute top-6 right-6 text-gray-400 hover:text-gray-600 transition-colors duration-200 close-modal-btn">
      <i class="fas fa-times">
      </i>
     </button>
    </div>
    <div class="p-6">
     <div class="bg-gray-50 rounded-xl p-5 mb-6">
      <h3 class="text-sm font-medium text-gray-700 mb-3">
       添加新标签
      </h3>
      <div class="space-y-4">
       <div>
        <label class="block text-sm font-medium text-gray-700 mb-1" for="new-tag-name">
         标签名称
         <span class="text-accent">
          *
         </span>
        </label>
        <input class="w-full px-4 py-2 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all duration-200" id="new-tag-name" placeholder="输入标签名称" required="" type="text"/>
       </div>
       <div>
        <label class="block text-sm font-medium text-gray-700 mb-1" for="new-tag-color">
         标签颜色
         <span class="text-accent">
          *
         </span>
        </label>
        <div class="grid grid-cols-6 gap-2 mb-2">
         <button class="w-full h-8 rounded-full bg-blue-500 border-2 border-transparent tag-color-option active" data-color="#3B82F6">
         </button>
         <button class="w-full h-8 rounded-full bg-red-500 border-2 border-transparent tag-color-option" data-color="#EF4444">
         </button>
         <button class="w-full h-8 rounded-full bg-green-500 border-2 border-transparent tag-color-option" data-color="#10B981">
         </button>
         <button class="w-full h-8 rounded-full bg-yellow-500 border-2 border-transparent tag-color-option" data-color="#F59E0B">
         </button>
         <button class="w-full h-8 rounded-full bg-purple-500 border-2 border-transparent tag-color-option" data-color="#8B5CF6">
         </button>
         <button class="w-full h-8 rounded-full bg-pink-500 border-2 border-transparent tag-color-option" data-color="#EC4899">
         </button>
        </div>
        <input id="new-tag-color" type="hidden" value="#3B82F6"/>
       </div>
       <button class="w-full py-2 bg-primary hover:bg-primary/90 text-white rounded-lg transition-colors duration-200 font-medium" id="save-tag-btn">
        添加标签
       </button>
      </div>
     </div>
     <div>
      <h3 class="text-sm font-medium text-gray-700 mb-3 flex items-center">
       标签排序
       <span class="ml-2 text-xs text-gray-500 font-normal">
        拖拽调整顺序
       </span>
      </h3>
      <div class="space-y-2 max-h-60 overflow-y-auto pr-2" id="tags-sortable">
       <div class="p-3 bg-gray-50 rounded-lg flex items-center justify-between cursor-move tag-item" data-color="#3B82F6" data-id="1">
        <div class="flex items-center">
         <i class="fas fa-grip-vertical text-gray-400 mr-3">
         </i>
         <div class="flex items-center">
          <span class="w-3 h-3 rounded-full mr-2" style="background-color: #3B82F6;">
          </span>
          <span>
           搜索引擎
          </span>
         </div>
        </div>
        <div class="flex space-x-2">
         <button class="text-gray-400 hover:text-primary edit-tag-btn">
          <i class="fas fa-edit">
          </i>
         </button>
         <button class="text-gray-400 hover:text-accent delete-tag-btn">
          <i class="fas fa-trash">
          </i>
         </button>
        </div>
       </div>
       <div class="p-3 bg-gray-50 rounded-lg flex items-center justify-between cursor-move tag-item" data-color="#EF4444" data-id="2">
        <div class="flex items-center">
         <i class="fas fa-grip-vertical text-gray-400 mr-3">
         </i>
         <div class="flex items-center">
          <span class="w-3 h-3 rounded-full mr-2" style="background-color: #EF4444;">
          </span>
          <span>
           Git
          </span>
         </div>
        </div>
        <div class="flex space-x-2">
         <button class="text-gray-400 hover:text-primary edit-tag-btn">
          <i class="fas fa-edit">
          </i>
         </button>
         <button class="text-gray-400 hover:text-accent delete-tag-btn">
          <i class="fas fa-trash">
          </i>
         </button>
        </div>
       </div>
       <div class="p-3 bg-gray-50 rounded-lg flex items-center justify-between cursor-move tag-item" data-color="#10B981" data-id="3">
        <div class="flex items-center">
         <i class="fas fa-grip-vertical text-gray-400 mr-3">
         </i>
         <div class="flex items-center">
          <span class="w-3 h-3 rounded-full mr-2" style="background-color: #10B981;">
          </span>
          <span>
           常用
          </span>
         </div>
        </div>
        <div class="flex space-x-2">
         <button class="text-gray-400 hover:text-primary edit-tag-btn">
          <i class="fas fa-edit">
          </i>
         </button>
         <button class="text-gray-400 hover:text-accent delete-tag-btn">
          <i class="fas fa-trash">
          </i>
         </button>
        </div>
       </div>
      </div>
     </div>
    </div>
    <div class="p-4 border-t border-gray-100 flex justify-end">
     <button class="px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors duration-200 close-modal-btn">
      关闭
     </button>
    </div>
   </div>
   <!-- [/MODULE] 69s_模态框区域:管理标签模态框 -- 包含添加标签表单和标签拖拽排序功能 -->
  </div>
  <!-- [/MODULE] 36p_模态框区域 -- 包含添加网站的模态框 -->
  <!-- [MODULE] 58r_通知提示区域 -->
  <div class="fixed bottom-6 right-6 z-50 flex flex-col space-y-3" id="toast-container">
  </div>
  <!-- [/MODULE] 58r_通知提示区域 -- 用于显示操作成功或失败的通知提示 -->
  <!-- [JSMOD] eft_页面初始化 -->
  <script id="init-script">
   document.addEventListener('DOMContentLoaded', function () {
  // 初始化页面交互
  initModal();
  initSearch();
  initAddTag();
  initSiteActions();
  initToast();
});
  </script>
  <!-- [/JSMOD] eft_页面初始化 -- 页面加载完成后初始化所有交互功能 -->
  <!-- [JSMOD] fgh_模态框功能 -->
  <script id="modal-script">
   function initModal() {
  var modalOverlay = document.getElementById('modal-overlay');
  var addSiteModal = document.getElementById('add-site-modal');
  var addSiteBtn = document.getElementById('add-site-btn');
  var emptyAddBtn = document.getElementById('empty-add-btn');
  var closeModalBtn = document.getElementById('close-modal-btn');
  var cancelBtn = document.getElementById('cancel-btn');

  // 打开模态框
  function openModal() {
    modalOverlay.classList.remove('hidden');
    // 使用setTimeout触发重排，使过渡动画生效
    setTimeout(function () {
      modalOverlay.classList.add('opacity-100');
      addSiteModal.classList.remove('scale-95');
      addSiteModal.classList.add('scale-100');
    }, 10);
    document.body.style.overflow = 'hidden'; // 防止背景滚动
  }

  // 关闭模态框
  function closeModal() {
    modalOverlay.classList.remove('opacity-100');
    addSiteModal.classList.remove('scale-100');
    addSiteModal.classList.add('scale-95');
    setTimeout(function () {
      modalOverlay.classList.add('hidden');
      document.body.style.overflow = ''; // 恢复背景滚动
    }, 200);
  }

  // 添加打开模态框的事件监听
  // 确保元素存在再添加事件监听
  if (addSiteBtn) addSiteBtn.addEventListener('click', openModal);
  if (emptyAddBtn) emptyAddBtn.addEventListener('click', openModal);

  // 添加关闭模态框的事件监听
  closeModalBtn.addEventListener('click', closeModal);
  cancelBtn.addEventListener('click', closeModal);

  // 点击模态框外部关闭
  modalOverlay.addEventListener('click', function (e) {
    if (e.target === modalOverlay) {
      closeModal();
    }
  });

  // 按ESC键关闭模态框
  document.addEventListener('keydown', function (e) {
    if (e.key === 'Escape' && !modalOverlay.classList.contains('hidden')) {
      closeModal();
    }
  });

  // 表单提交处理
  var addSiteForm = document.getElementById('add-site-form');
  addSiteForm.addEventListener('submit', function (e) {
    e.preventDefault();

    // 获取表单数据
    var siteName = document.getElementById('site-name').value;
    var siteUrl = document.getElementById('site-url').value;
    if (siteName && siteUrl) {
      // 模拟保存成功
      showToast('网站添加成功！', 'success');
      closeModal();
      // 重置表单
      addSiteForm.reset();
      document.getElementById('tags-container').innerHTML = '';
    } else {
      showToast('请填写网站名称和URL', 'error');
    }
  });
}
  </script>
  <!-- [/JSMOD] fgh_模态框功能 -- 实现模态框的打开、关闭以及表单提交功能 -->
  <!-- [JSMOD] hij_搜索功能 -->
  <script id="search-script">
   function initSearch() {
  var searchInput = document.getElementById('search-input');
  var siteCards = document.querySelectorAll('[class*="网站列表区域:网站卡片-"]');
  searchInput.addEventListener('input', function (e) {
    var searchTerm = e.target.value.toLowerCase().trim();
    if (searchTerm === '') {
      // 搜索为空时显示所有卡片
      siteCards.forEach(function (card) {
        card.style.display = 'block';
      });
      return;
    }

    // 过滤卡片
    var hasResults = false;
    siteCards.forEach(function (card) {
      var title = card.querySelector('h3')?.textContent.toLowerCase() || '';
      var url = card.querySelector('p.text-xs')?.textContent.toLowerCase() || '';
      var description = card.querySelector('p.text-sm')?.textContent.toLowerCase() || '';
      var tags = Array.from(card.querySelectorAll('[class*="rounded-full bg-"]')).map(function (tag) {
        return tag.textContent.toLowerCase();
      }).join("");
      var matches = title.includes(searchTerm) || url.includes(searchTerm) || description.includes(searchTerm) || tags.includes(searchTerm);
      if (matches) {
        card.style.display = 'block';
        hasResults = true;
      } else {
        card.style.display = 'none';
      }
    });

    // 显示/隐藏空状态
    var emptyState = document.getElementById('empty-state');
    var siteList = document.querySelector('[class*="网站列表区域:网站卡片"]').parentElement;
    if (!hasResults) {
      siteList.style.display = 'none';
      emptyState.classList.remove('hidden');
      emptyState.querySelector('h3').textContent = '未找到结果';
      emptyState.querySelector('p').textContent = "\u6CA1\u6709\u627E\u5230\u4E0E\"".concat(searchTerm, "\"\u76F8\u5173\u7684\u7F51\u7AD9");
    } else {
      siteList.style.display = 'grid';
      emptyState.classList.add('hidden');
    }
  });
}
  </script>
  <!-- [/JSMOD] hij_搜索功能 -- 实现搜索框对网站卡片的过滤功能 -->
  <!-- [JSMOD] jkl_标签添加功能 -->
  <script id="tag-script">
   function initAddTag() {
  var tagInput = document.getElementById('tag-input');
  var addTagBtn = document.getElementById('add-tag-btn');
  var tagsContainer = document.getElementById('tags-container');

  // 添加标签
  function addTag(text) {
    if (!text.trim()) return;

    // 检查标签是否已存在
    var existingTags = Array.from(tagsContainer.querySelectorAll('span')).map(function (tag) {
      return tag.textContent.trim().replace('×', '');
    });
    if (existingTags.includes(text.trim())) {
      showToast('标签已存在', 'warning');
      return;
    }
    var tagElement = document.createElement('span');
    tagElement.className = 'px-3 py-1 rounded-full bg-gray-100 text-gray-600 text-sm flex items-center';
    tagElement.innerHTML = "".concat(text, "<button class=\"ml-1 text-gray-400 hover:text-gray-500 remove-tag-btn\">\n                        <i class=\"fas fa-times-circle\"></i>\n                    </button>");

    // 删除标签
    tagElement.querySelector('.remove-tag-btn').addEventListener('click', function () {
      tagElement.remove();
    });
    tagsContainer.appendChild(tagElement);
    tagInput.value = '';
  }

  // 点击添加按钮
  addTagBtn.addEventListener('click', function () {
    addTag(tagInput.value);
  });

  // 按Enter键添加
  tagInput.addEventListener('keydown', function (e) {
    if (e.key === 'Enter') {
      e.preventDefault();
      addTag(tagInput.value);
    }
  });

  // 已存在标签的删除功能
  document.querySelectorAll('#tags-container .remove-tag-btn').forEach(function (btn) {
    btn.addEventListener('click', function () {
      btn.parentElement.remove();
    });
  });
}
  </script>
  <!-- [/JSMOD] jkl_标签添加功能 -- 实现标签的添加和删除功能 -->
  <!-- [JSMOD] lmn_网站操作功能 -->
  <script id="site-script">
   function initSiteActions() {
  // 编辑网站
  document.querySelectorAll('.edit-site-btn').forEach(function (btn) {
    btn.addEventListener('click', function () {
      var card = btn.closest('[class*="网站列表区域:网站卡片-"]');
      var siteName = card.querySelector('h3').textContent;

      // 填充表单数据（模拟）
      document.getElementById('site-name').value = siteName;
      document.getElementById('site-url').value = card.querySelector('p.text-xs').textContent;
      document.getElementById('site-desc').value = card.querySelector('p.text-sm')?.textContent || '';

      // 打开模态框
      document.getElementById('modal-overlay').classList.remove('hidden');
      setTimeout(function () {
        document.getElementById('modal-overlay').classList.add('opacity-100');
        document.getElementById('add-site-modal').classList.remove('scale-95');
        document.getElementById('add-site-modal').classList.add('scale-100');
      }, 10);
      document.body.style.overflow = 'hidden';
    });
  });

  // 删除网站
  document.querySelectorAll('.delete-site-btn').forEach(function (btn) {
    btn.addEventListener('click', function () {
      var card = btn.closest('[class*="网站列表区域:网站卡片-"]');
      var siteName = card.querySelector('h3').textContent;
      if (confirm("\u786E\u5B9A\u8981\u5220\u9664\"".concat(siteName, "\"\u5417\uFF1F"))) {
        card.remove();
        showToast('网站已删除', 'success');

        // 检查是否还有网站卡片
        var remainingCards = document.querySelectorAll('[class*="网站列表区域:网站卡片-"]:not([class*="添加卡片"])');
        if (remainingCards.length === 0) {
          document.querySelector('[class*="网站列表区域:网站卡片"]').parentElement.style.display = 'none';
          document.getElementById('empty-state').classList.remove('hidden');
        }
      }
    });
  });
}
  </script>
  <!-- [/JSMOD] lmn_网站操作功能 -- 实现网站卡片的编辑和删除功能 -->
  <!-- [JSMOD] opq_通知提示功能 -->
  <script id="toast-script">
   function initToast() {
  // 已经在DOMContentLoaded中调用
}
function showToast(message) {
  var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'info';
  var toastContainer = document.getElementById('toast-container');
  var toast = document.createElement('div');

  // 根据类型设置样式
  var bgColor, textColor, icon;
  switch (type) {
    case 'success':
      bgColor = 'bg-green-500';
      textColor = 'text-white';
      icon = 'fas fa-check-circle';
      break;
    case 'error':
      bgColor = 'bg-red-500';
      textColor = 'text-white';
      icon = 'fas fa-exclamation-circle';
      break;
    case 'warning':
      bgColor = 'bg-yellow-500';
      textColor = 'text-white';
      icon = 'fas fa-exclamation-triangle';
      break;
    default:
      bgColor = 'bg-blue-500';
      textColor = 'text-white';
      icon = 'fas fa-info-circle';
  }
  toast.className = "".concat(bgColor, "").concat(textColor, "px-4 py-3 rounded-lg shadow-lg flex items-center space-x-3 transform translate-y-10 opacity-0 transition-all duration-300");
  toast.innerHTML = "<i class=\"".concat(icon, "\"></i>\n                <span>").concat(message, "</span>");
  toastContainer.appendChild(toast);

  // 显示动画
  setTimeout(function () {
    toast.classList.remove('translate-y-10', 'opacity-0');
  }, 10);

  // 3秒后自动关闭
  setTimeout(function () {
    toast.classList.add('translate-y-10', 'opacity-0');
    setTimeout(function () {
      toast.remove();
    }, 300);
  }, 3000);
}
  </script>
  <!-- [/JSMOD] opq_通知提示功能 -- 实现操作结果的通知提示功能 -->
 </body>
</html>
<!-- [JSMOD] 7a2_管理分类模态框控制 -->
<script id="manage-categories-script">
 document.addEventListener('DOMContentLoaded', function () {
  // 管理分类按钮点击事件
  var editCategoriesBtn = document.getElementById('edit-categories-btn');
  var modalOverlay = document.getElementById('modal-overlay');
  var manageCategoriesModal = document.getElementById('manage-categories-modal');
  var closeModalBtns = document.querySelectorAll('.close-modal-btn');

  // 打开管理分类模态框
  if (editCategoriesBtn) {
    editCategoriesBtn.addEventListener('click', function () {
      modalOverlay.classList.remove('hidden');
      setTimeout(function () {
        modalOverlay.classList.remove('opacity-0');
        manageCategoriesModal.classList.remove('hidden');
        setTimeout(function () {
          manageCategoriesModal.classList.remove('scale-95');
        }, 10);
      }, 10);
    });
  }

  // 关闭模态框的通用函数
  var closeModal = function closeModal() {
    manageCategoriesModal.classList.add('scale-95');
    setTimeout(function () {
      manageCategoriesModal.classList.add('hidden');
      modalOverlay.classList.add('opacity-0');
      setTimeout(function () {
        modalOverlay.classList.add('hidden');
      }, 200);
    }, 200);
  };

  // 为所有关闭按钮添加事件
  closeModalBtns.forEach(function (btn) {
    btn.addEventListener('click', closeModal);
  });

  // 点击遮罩层关闭模态框
  modalOverlay.addEventListener('click', function (e) {
    if (e.target === modalOverlay) {
      closeModal();
    }
  });

  // ESC键关闭模态框
  document.addEventListener('keydown', function (e) {
    if (e.key === 'Escape' && !modalOverlay.classList.contains('hidden')) {
      closeModal();
    }
  });
});
</script>
<!-- [JSMOD] 81t_管理标签模态框控制 -->
<script id="manage-tags-script">
 document.addEventListener('DOMContentLoaded', function () {
  // 管理标签按钮点击事件
  var editTagsBtn = document.getElementById('manage-tags-btn');
  var modalOverlay = document.getElementById('modal-overlay');
  var manageTagsModal = document.getElementById('manage-tags-modal');
  var closeModalBtns = document.querySelectorAll('.close-modal-btn');
  var colorOptions = document.querySelectorAll('.tag-color-option');
  var selectedColorInput = document.getElementById('new-tag-color');

  // 打开管理标签模态框
  if (editTagsBtn) {
    editTagsBtn.addEventListener('click', function (e) {
      e.stopPropagation(); // 防止事件冒泡影响其他模态框
      modalOverlay.classList.remove('hidden');
      setTimeout(function () {
        modalOverlay.classList.remove('opacity-0');
        // 隐藏所有模态框
        document.querySelectorAll('#modal-overlay > div').forEach(function (modal) {
          modal.classList.add('hidden', 'scale-95');
        });
        // 只显示标签管理模态框
        manageTagsModal.classList.remove('hidden');
        setTimeout(function () {
          manageTagsModal.classList.remove('scale-95');
        }, 10);
      }, 10);
    });
  }

  // 关闭模态框的通用函数
  var closeTagsModal = function closeTagsModal() {
    manageTagsModal.classList.add('scale-95');
    setTimeout(function () {
      manageTagsModal.classList.add('hidden');
      modalOverlay.classList.add('opacity-0');
      setTimeout(function () {
        modalOverlay.classList.add('hidden');
      }, 200);
    }, 200);
  };

  // 为所有关闭按钮添加事件
  closeModalBtns.forEach(function (btn) {
    btn.addEventListener('click', function () {
      if (!manageTagsModal.classList.contains('hidden')) {
        closeTagsModal();
      }
    });
  });

  // 点击遮罩层关闭模态框
  modalOverlay.addEventListener('click', function (e) {
    if (e.target === modalOverlay && !manageTagsModal.classList.contains('hidden')) {
      closeTagsModal();
    }
  });

  // ESC键关闭模态框
  document.addEventListener('keydown', function (e) {
    if (e.key === 'Escape' && !modalOverlay.classList.contains('hidden') && !manageTagsModal.classList.contains('hidden')) {
      closeTagsModal();
    }
  });

  // 标签颜色选择
  colorOptions.forEach(function (option) {
    option.addEventListener('click', function () {
      // 移除所有选中状态
      colorOptions.forEach(function (opt) {
        return opt.classList.remove('active', 'border-black');
      });
      // 添加当前选中状态
      this.classList.add('active', 'border-black');
      // 设置隐藏输入框的值
      selectedColorInput.value = this.getAttribute('data-color');
    });
  });

  // 简单的拖拽排序功能模拟
  var tagItems = document.querySelectorAll('.tag-item');
  var draggedItem = null;
  tagItems.forEach(function (item) {
    item.addEventListener('dragstart', function () {
      var _this = this;
      draggedItem = this;
      setTimeout(function () {
        _this.classList.add('opacity-50');
      }, 0);
    });
    item.addEventListener('dragend', function () {
      draggedItem = null;
      this.classList.remove('opacity-50');
    });
    item.addEventListener('dragover', function (e) {
      e.preventDefault();
    });
    item.addEventListener('dragenter', function (e) {
      e.preventDefault();
      if (this !== draggedItem) {
        this.classList.add('bg-gray-100');
      }
    });
    item.addEventListener('dragleave', function () {
      this.classList.remove('bg-gray-100');
    });
    item.addEventListener('drop', function () {
      this.classList.remove('bg-gray-100');
      var parent = document.getElementById('tags-sortable');
      var children = Array.from(parent.children);
      var draggedIndex = children.indexOf(draggedItem);
      var targetIndex = children.indexOf(this);
      if (draggedIndex < targetIndex) {
        parent.insertBefore(draggedItem, this.nextSibling);
      } else {
        parent.insertBefore(draggedItem, this);
      }
    });
  });
});
</script>
<!-- [/JSMOD] 81t_管理标签模态框控制 -- 实现管理标签模态框的显示、隐藏、颜色选择及拖拽排序功能 -->
<!-- [/JSMOD] 7a2_管理分类模态框控制 -- 实现管理分类模态框的显示、隐藏及相关交互功能 -->
<!-- [JSMOD] 2b9_管理标签事件处理 -->
<script id="tag-events-script">
 document.addEventListener('DOMContentLoaded', function () {
  // 保存标签按钮事件
  var saveTagBtn = document.getElementById('save-tag-btn');
  var newTagNameInput = document.getElementById('new-tag-name');
  var newTagColorInput = document.getElementById('new-tag-color');
  var tagsSortableContainer = document.getElementById('tags-sortable');

  // 保存新标签
  if (saveTagBtn) {
    saveTagBtn.addEventListener('click', function () {
      var tagName = newTagNameInput.value.trim();
      var tagColor = newTagColorInput.value;
      if (!tagName) {
        alert('请输入标签名称');
        return;
      }

      // 创建新标签项
      var newTagId = Date.now(); // 使用时间戳作为唯一ID
      var newTagItem = document.createElement('div');
      newTagItem.className = 'p-3 bg-gray-50 rounded-lg flex items-center justify-between cursor-move tag-item';
      newTagItem.setAttribute('data-id', newTagId);
      newTagItem.setAttribute('data-color', tagColor);
      newTagItem.draggable = true;
      newTagItem.innerHTML = "<div class=\"flex items-center\">\n         <i class=\"fas fa-grip-vertical text-gray-400 mr-3\"></i>\n         <div class=\"flex items-center\">\n          <span class=\"w-3 h-3 rounded-full mr-2\" style=\"background-color:".concat(tagColor, "\"></span>\n          <span>").concat(tagName, "</span>\n         </div>\n        </div>\n        <div class=\"flex space-x-2\">\n         <button class=\"text-gray-400 hover:text-primary edit-tag-btn\">\n          <i class=\"fas fa-edit\"></i>\n         </button>\n         <button class=\"text-gray-400 hover:text-accent delete-tag-btn\">\n          <i class=\"fas fa-trash\"></i>\n         </button>\n        </div>");

      // 添加到容器
      tagsSortableContainer.appendChild(newTagItem);

      // 清空输入框
      newTagNameInput.value = '';

      // 为新标签添加拖拽和事件监听
      initTagItemEvents(newTagItem);
    });
  }

  // 初始化标签项事件
  function initTagItemEvents(tagItem) {
    // 编辑标签事件
    var editBtn = tagItem.querySelector('.edit-tag-btn');
    // 删除标签事件
    var deleteBtn = tagItem.querySelector('.delete-tag-btn');

    // 编辑标签
    editBtn.addEventListener('click', function () {
      var tagId = tagItem.getAttribute('data-id');
      var tagName = tagItem.querySelector('span:last-child').textContent;
      var tagColor = tagItem.getAttribute('data-color');

      // 填充到输入框
      newTagNameInput.value = tagName;
      newTagColorInput.value = tagColor;

      // 高亮选中的颜色
      document.querySelectorAll('.tag-color-option').forEach(function (option) {
        if (option.getAttribute('data-color') === tagColor) {
          option.classList.add('active', 'border-black');
        } else {
          option.classList.remove('active', 'border-black');
        }
      });

      // 滚动到顶部
      document.querySelector('#manage-tags-modal .p-6').scrollTop = 0;
    });

    // 删除标签
    deleteBtn.addEventListener('click', function () {
      if (confirm('确定要删除这个标签吗？')) {
        tagItem.remove();
      }
    });

    // 拖拽排序事件
    tagItem.addEventListener('dragstart', function () {
      var _this = this;
      setTimeout(function () {
        _this.classList.add('opacity-50');
      }, 0);
    });
    tagItem.addEventListener('dragend', function () {
      this.classList.remove('opacity-50');
    });
    tagItem.addEventListener('dragover', function (e) {
      e.preventDefault();
    });
    tagItem.addEventListener('dragenter', function (e) {
      e.preventDefault();
      if (this !== draggedItem) {
        this.classList.add('bg-gray-100');
      }
    });
    tagItem.addEventListener('dragleave', function () {
      this.classList.remove('bg-gray-100');
    });
    tagItem.addEventListener('drop', function () {
      this.classList.remove('bg-gray-100');
      var parent = document.getElementById('tags-sortable');
      var children = Array.from(parent.children);
      var draggedIndex = children.indexOf(draggedItem);
      var targetIndex = children.indexOf(this);
      if (draggedIndex < targetIndex) {
        parent.insertBefore(draggedItem, this.nextSibling);
      } else {
        parent.insertBefore(draggedItem, this);
      }
    });
  }

  // 初始化现有标签项事件
  document.querySelectorAll('.tag-item').forEach(function (item) {
    initTagItemEvents(item);
  });
});
</script>
<!-- [/JSMOD] 2b9_管理标签事件处理 -- 实现标签的添加、编辑、删除和拖拽排序功能 -->
<!-- [JSMOD] 9c3_添加网站弹窗控制 -->
<script id="add-site-modal-script">
 document.addEventListener('DOMContentLoaded', function () {
  // 获取添加网站按钮和相关模态框元素
  var addSiteBtn = document.getElementById('add-site-btn');
  var modalOverlay = document.getElementById('modal-overlay');
  var addSiteModal = document.getElementById('add-site-modal');
  var closeModalBtn = document.getElementById('close-modal-btn');
  var cancelBtn = document.getElementById('cancel-btn');

  // 打开添加网站模态框
  if (addSiteBtn) {
    addSiteBtn.addEventListener('click', function () {
      modalOverlay.classList.remove('hidden');
      setTimeout(function () {
        modalOverlay.classList.remove('opacity-0');
        // 隐藏所有模态框
        document.querySelectorAll('#modal-overlay > div').forEach(function (modal) {
          modal.classList.add('hidden', 'scale-95');
        });
        // 只显示添加网站模态框
        addSiteModal.classList.remove('hidden');
        setTimeout(function () {
          addSiteModal.classList.remove('scale-95');
        }, 10);
      }, 10);
    });
  }

  // 关闭模态框的函数
  function closeAddSiteModal() {
    addSiteModal.classList.add('scale-95');
    setTimeout(function () {
      addSiteModal.classList.add('hidden');
      modalOverlay.classList.add('opacity-0');
      setTimeout(function () {
        modalOverlay.classList.add('hidden');
      }, 200);
    }, 200);
  }

  // 为关闭按钮添加事件
  if (closeModalBtn) {
    closeModalBtn.addEventListener('click', closeAddSiteModal);
  }

  // 为取消按钮添加事件
  if (cancelBtn) {
    cancelBtn.addEventListener('click', closeAddSiteModal);
  }

  // 点击遮罩层关闭模态框
  modalOverlay.addEventListener('click', function (e) {
    if (e.target === modalOverlay && !addSiteModal.classList.contains('hidden')) {
      closeAddSiteModal();
    }
  });

  // ESC键关闭模态框
  document.addEventListener('keydown', function (e) {
    if (e.key === 'Escape' && !modalOverlay.classList.contains('hidden') && !addSiteModal.classList.contains('hidden')) {
      closeAddSiteModal();
    }
  });
});
</script>
<!-- [/JSMOD] 9c3_添加网站弹窗控制 -- 修复添加网站按钮点击事件，确保弹窗正常显示 -->
